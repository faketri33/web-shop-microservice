# 🛍️ Catalog Service

**Catalog Service** — это микросервис, отвечающий за управление продуктами в системе. Он реализует операции создания, получения, обновления товаров, а также взаимодействует с Kafka и Redis для обработки событий и аналитики.

---

## 📌 Основные функции

- 📥 **Создание продукта** — сохраняет данные в Elasticsearch и публикует событие `ProductPublished` в Kafka.
- 👁️ **Просмотр товара по ID** — помимо возврата товара, отправляет событие `product-view` в Kafka.
- 🧠 **Популярные товары** — получает список популярных товаров из Redis, которые записывает **Analytics Service** на основе событий просмотра.

---

## 🛠️ Используемые технологии

| Технология          | Назначение                                  |
|---------------------|---------------------------------------------|
| **Spring Boot**     | Основной фреймворк                          |
| **Elasticsearch**   | Реактивное подключение к Elasticsearch      |
| **Redis Reactive**  | Доступ к популярным товарам через Redis     |
| **Apache Kafka**    | Асинхронные события (создание и просмотр)   |
| **Project Reactor** | Реактивное программирование                 |

---

## 📤 Kafka Topics

| Событие            | Назначение                                      |
|--------------------|-------------------------------------------------|
| `ProductPublished` | Публикуется при создании продукта               |
| `ProductView`      | Публикуется при просмотре товара по его ID      |

---

## 🧠 Redis (Popular Products)

Сервис обращается к Redis, чтобы получить список **100 самых популярных товаров**, сформированных `Analytics Service` на основе топика `product-view`.

---

## 🗄️ Хранилище данных

- **Elasticsearch** — основная база для хранения информации о продуктах.
- **Redis** — используется только для получения данных (популярные товары).

---

## 🔄 Архитектурное взаимодействие

- Все входящие запросы проходят через **API Gateway**.
- Сервис зарегистрирован в **Eureka** для обнаружения.
- Использует **Kafka** для коммуникации событийного характера.
- Получает данные из **Redis**, но не пишет в него напрямую.

---

## 📂 Структура проекта (прим.)

```
catalog-service
├───src
│   └───main
│       ├───java
│       │   └───org
│       │       └───catalog
│       │           ├───entity
│       │           │   ├───categories
│       │           │   │   ├───gateway
│       │           │   │   └───model
│       │           │   ├───chapter
│       │           │   │   ├───gateway
│       │           │   │   └───model
│       │           │   └───product
│       │           │       ├───events
│       │           │       ├───gateway
│       │           │       └───model
│       │           ├───infrastructure
│       │           │   ├───categories
│       │           │   │   ├───contoller
│       │           │   │   └───gateway
│       │           │   ├───chapter
│       │           │   │   ├───contoller
│       │           │   │   └───gateway
│       │           │   ├───product
│       │           │   │   ├───controller
│       │           │   │   └───model
│       │           │   └───web
│       │           │       ├───event
│       │           │       ├───messaging
│       │           │       │   └───gateway
│       │           │       └───secure
│       │           └───usecase
│       │               ├───categories
│       │               ├───chapter
│       │               ├───product
│       │               └───web
│       │                   └───messaging
```

---